<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invoice #{{ invoice.number }}</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Helvetica, Arial, sans-serif;
      font-size: 11px;
      color: #0F172A;
      margin: 0;
      padding: 0;
    }

    .page {
      padding: 24px 28px;
    }

    .top-accent {
      height: 6px;
      background: #6C5CE7;
      margin: -24px -28px 18px -28px;
    }

    .muted { color: #64748b; }
    .mono { font-family: Courier, "Courier New", monospace; }

    table { width: 100%; border-collapse: collapse; }
    .header td { vertical-align: top; }
    .header .right { text-align: right; }

    .title {
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 0.2px;
      margin: 0;
    }

    .meta {
      margin-top: 6px;
    }
    .meta td { padding: 2px 0; }
    .meta .label {
      text-transform: uppercase;
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 0.6px;
      color: #64748b;
      padding-right: 16px;
      white-space: nowrap;
    }
    .meta .value {
      font-weight: 700;
      white-space: nowrap;
    }

    .section-title {
      text-transform: uppercase;
      font-size: 9px;
      font-weight: 800;
      letter-spacing: 0.8px;
      color: #6C5CE7;
      margin: 14px 0 6px 0;
    }

    .card {
      border: 1px solid #f1f5f9;
      padding: 10px 12px;
      background: #fff;
    }

    .items {
      margin-top: 14px;
    }
    .items th {
      text-transform: uppercase;
      font-size: 9px;
      letter-spacing: 0.7px;
      color: #64748b;
      text-align: left;
      padding: 8px 6px;
      border-bottom: 2px solid #0F172A;
    }
    .items td {
      padding: 10px 6px;
      border-bottom: 1px solid #f1f5f9;
      vertical-align: top;
    }
    .items .right { text-align: right; }

    .item-name { font-weight: 700; margin-bottom: 2px; }
    .item-desc { color: #64748b; font-size: 10px; }

    .bottom {
      margin-top: 18px;
    }
    .bottom td { vertical-align: top; }
    .bottom .left { width: 60%; padding-right: 18px; }
    .bottom .right { width: 40%; }

    .bank-title {
      text-transform: uppercase;
      font-size: 9px;
      font-weight: 800;
      letter-spacing: 0.8px;
      color: #FF6B6B;
      margin-bottom: 8px;
    }
    .bank td { padding: 2px 0; }
    .bank .label { width: 110px; color: #64748b; }
    .bank .value { font-weight: 700; }

    .summary td { padding: 4px 0; }
    .summary .label { color: #64748b; }
    .summary .value { text-align: right; font-weight: 800; }
    .summary .total-row td { padding-top: 8px; border-top: 1px solid #f1f5f9; }

    .amount-paid { color: #10b981; }
    .balance-due { color: #FF6B6B; }

    .terms {
      margin-top: 14px;
      padding-top: 10px;
      border-top: 1px solid #f1f5f9;
      color: #64748b;
      font-size: 9px;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="top-accent"></div>

    <table class="header">
      <tr>
        <td>
          <p class="title">{{ company.name|default:"TarvizDigimart" }}</p>
          <div class="muted" style="margin-top: 6px;">
            {{ company.address_line1 }}<br />
            {% if company.address_line2 %}{{ company.address_line2 }}<br />{% endif %}
            {{ company.email }} | {{ company.phone }}
          </div>
        </td>
        <td class="right">
          <p class="title" style="color: #f1f5f9; background: #0F172A; display: inline-block; padding: 6px 10px; margin: 0;">INVOICE</p>
          <table class="meta" style="margin-top: 10px;">
            <tr>
              <td class="label">Invoice Number</td>
              <td class="value">{{ invoice.number }}</td>
            </tr>
            <tr>
              <td class="label">Invoice Date</td>
              <td class="value">{{ invoice.date }}</td>
            </tr>
            {% if invoice.due_date %}
            <tr>
              <td class="label" style="color: #FF6B6B;">Due Date</td>
              <td class="value" style="color: #FF6B6B;">{{ invoice.due_date }}</td>
            </tr>
            {% endif %}
          </table>
        </td>
      </tr>
    </table>

    <table style="margin-top: 14px;">
      <tr>
        <td style="width: 50%; padding-right: 12px; vertical-align: top;">
          <div class="section-title">Bill To</div>
          <div class="card">
            <div style="font-weight: 800; font-size: 13px;">{{ client.business_name }}</div>
            <div class="muted" style="margin-top: 4px;">
              {{ client.address }}<br />
              <strong class="muted">Phone:</strong> {{ client.phone }}
              {% if client.gstin %}<br /><strong class="muted">GSTIN:</strong> <span class="mono">{{ client.gstin }}</span>{% endif %}
            </div>
          </div>
        </td>
        <td style="width: 50%; padding-left: 12px; vertical-align: top;">
          <div class="section-title">Payment Info</div>
          <div class="card">
            <div><span class="muted" style="text-transform: uppercase; font-size: 9px; font-weight: 700;">Method</span></div>
            <div style="font-weight: 800; margin-bottom: 8px;">{{ invoice.payment_mode }}</div>
            <div><span class="muted" style="text-transform: uppercase; font-size: 9px; font-weight: 700;">Terms</span></div>
            <div style="font-weight: 800;">{{ invoice.payment_terms }}</div>
          </div>
        </td>
      </tr>
    </table>

    <table class="items">
      <thead>
        <tr>
          <th>Service Description</th>
          <th>HSN/SAC</th>
          <th class="right">Qty</th>
          <th class="right">Amount</th>
        </tr>
      </thead>
      <tbody>
        {% for item in invoice.items %}
        <tr>
          <td>
            <div class="item-name">{{ item.name }}</div>
            <div class="item-desc">{{ item.description }}</div>
          </td>
          <td class="mono">{{ item.hsn_sac }}</td>
          <td class="right mono">{{ item.quantity }}</td>
          <td class="right mono" style="font-weight: 800;">{{ item.total }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <table class="bottom">
      <tr>
        <td class="left">
          <div class="section-title">Bank Details</div>
          <div class="card">
            <div class="bank-title">Transfer Funds To</div>
            <table class="bank">
              <tr>
                <td class="label">Account Name</td>
                <td class="value">{{ bank.account_name }}</td>
              </tr>
              <tr>
                <td class="label">Bank Name</td>
                <td class="value">{{ bank.bank_name }}</td>
              </tr>
              <tr>
                <td class="label">Account No</td>
                <td class="value mono">{{ bank.account_number }}</td>
              </tr>
              <tr>
                <td class="label">IFSC Code</td>
                <td class="value mono">{{ bank.ifsc }}</td>
              </tr>
            </table>
          </div>
        </td>
        <td class="right">
          <div class="section-title">Summary</div>
          <div class="card">
            <table class="summary">
              {% if invoice.subtotal %}
              <tr>
                <td class="label">Subtotal</td>
                <td class="value mono">{{ invoice.subtotal }}</td>
              </tr>
              {% endif %}
              {% if invoice.gst_amount %}
              <tr>
                <td class="label">GST ({{ invoice.gst_percentage }}%)</td>
                <td class="value mono">{{ invoice.gst_amount }}</td>
              </tr>
              {% endif %}
              <tr class="total-row">
                <td style="font-weight: 900;">Total Amount</td>
                <td class="value mono" style="font-size: 13px;">{{ invoice.total_amount }}</td>
              </tr>
              {% if invoice.paid_amount and invoice.paid_amount != "0" and invoice.paid_amount != 0 %}
              <tr>
                <td class="label amount-paid">Amount Paid</td>
                <td class="value mono amount-paid">-{{ invoice.paid_amount }}</td>
              </tr>
              {% endif %}
              <tr>
                <td class="label balance-due" style="font-weight: 900;">Balance Due</td>
                <td class="value mono balance-due" style="font-size: 13px;">{{ invoice.pending_amount }}</td>
              </tr>
            </table>
          </div>
        </td>
      </tr>
    </table>

    <div class="terms">
      <div style="font-weight: 800; color: #0F172A; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Terms &amp; Conditions</div>
      1. Please quote Invoice Number when making payments.<br />
      2. Payments are due within the timeframe specified in the payment terms.<br />
      3. This is a computer generated invoice and does not require a physical signature.<br />
      4. Thank you for choosing Tarviz Digimart. We value your business!
    </div>
  </div>
</body>
</html>
